<!DOCTYPE html>
<html lang="en">
  <head>
    <title>DULCEKAT</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <link href="https://fonts.googleapis.com/css?family=Poppins:200,300,400,500,600,700,800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Lora:400,400i,700,700i&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Amatic+SC:400,700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="css/open-iconic-bootstrap.min.css">
    <link rel="stylesheet" href="css/animate.css">
    
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/owl.theme.default.min.css">
    <link rel="stylesheet" href="css/magnific-popup.css">

    <link rel="stylesheet" href="css/aos.css">

    <link rel="stylesheet" href="css/ionicons.min.css">

    <link rel="stylesheet" href="css/bootstrap-datepicker.css">
    <link rel="stylesheet" href="css/jquery.timepicker.css">

    
    <link rel="stylesheet" href="css/flaticon.css">
    <link rel="stylesheet" href="css/icomoon.css">
	<link rel="stylesheet" href="css/style.css">
	
	<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>


	<script src="app/mytopline.js"></script>
	<script src="app/myheader.js"></script>
	<script src="app/myfooter.js" ></script>

  </head>
  <body class="goto-here">

	<div id="cart">

		<mytopline></mytopline>
		<myheader></myheader>


		<div class="hero-wrap hero-bread" style="background-color: white ;padding: 0.1px">
            <div class="container">
                <div class="row justify-content-center mb-3 pb-3">
                    <div class="col-md-12 heading-section text-center">
                        <h2 class="mb-4" style="font-size: 60px">Mis Compras</h2>
                    </div>
                </div>  
            </div>
        </div>

		<section class="ftco-section ftco-cart">
			<div class="container">
				<div class="row">
					<div class="col-md-12">
						<div class="cart-list">
							<table class="table">
								<thead class="thead-primary">
								<tr class="text-center">
										<th>&nbsp;</th>
                                        <th>&nbsp;</th>
                                        <th>Nombre del producto</th>
                                        <th>Precio</th>
                                        <th>Cantidad</th>
                                        <th>Total</th>
								</tr>
								</thead>
								<tbody>

									<tr class="text-center" v-for="(item,index) of items">
										
											<td class="product-remove" >
												<a v-on:click="deleteitem(index)" class="remove-button"><span class="ion-ios-close"></span></a>

											</td>
											
											<td class="image-prod">
												<div class="img" style="background-image:url(images/product-3.jpg);">
												</div>
											</td>
											
											<td class="product-name">
												<h3>{{item.nombre}}</h3>
												<p>{{item.description}}</p>
											</td>
											
											<td class="price">S/ {{item.price}}</td>
											
											<td class="quantity">
												<div class="input-group mb-3">
													<span class="input-group-btn mr-2">
														<button type="button" class="quantity-left-minus btn"  data-type="minus" v-on:click="item.quantiti--" :disabled="disabled(index)">
															<i class="ion-ios-remove" style="color: grey"></i>
														</button>
													</span>
													<input type="text" name="quantity" class="quantity form-control input-number" v-model="item.quantiti" min="1" max="100">
													<span class="input-group-btn ml-2">
														<button type="button" class="quantity-right-plus btn" data-type="plus" v-on:click="item.quantiti++">
															<i class="ion-ios-add" style="color: grey"></i>
														</button>
													</span>
												</div>
											</td>

											<td class="total" v-text="price(index)"></td>
									</tr><!-- END TR-->

								<!-- </div> -->

								</tbody>
							</table>
						</div>
					</div>
				</div>

				<div class="row justify-content-end">
                    <div class="col-lg-4 mt-5 cart-wrap">
                        <div class="cart-total mb-3">
                            <h3>Total compra</h3>
                            <p class="d-flex">
                                <span>Subtotal</span>
                                <span id="subtotal" v-text="`S/ `+totalprice"></span>
                            </p>
                            <hr>
                            <p class="d-flex total-price">
                                <span>Total</span>
                                <span id="total" v-text="`S/ `+totalprice"></span>
                            </p>
                        </div>
                        <p><a href="caja" class="btn btn-primary py-3 px-4" id="boton">Proceder a pagar</a></p>
                    </div>
				</div>
				
			</div>
		</section>

		

		<myfooter></myfooter>
    
	
  

  <!-- loader -->
  <!-- <div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px"><circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/><circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#F96D00"/></svg></div> -->

</div>

  <script src="js/jquery.min.js"></script>
	<script src="js/jquery-migrate-3.0.1.min.js"></script>
	<script src="js/popper.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/jquery.easing.1.3.js"></script>
	<script src="js/jquery.waypoints.min.js"></script>
	<script src="js/jquery.stellar.min.js"></script>
	<script src="js/owl.carousel.min.js"></script>
	<script src="js/jquery.magnific-popup.min.js"></script>
	<script src="js/aos.js"></script>
	<script src="js/jquery.animateNumber.min.js"></script>
	<script src="js/bootstrap-datepicker.js"></script>
	<script src="js/scrollax.min.js"></script>
	<script src="js/main.js"></script>
  	<script src="js/main2.js"></script>

  <script>
	new Vue({
		el: '#cart',
		data:{
			contador: 0,
			items:[
				{nombre:'Leche Gloria',description:'asdasdsa',price:2.32,quantiti:2},
				{nombre:'Harina Blanca Flor',description:'asdasdsa',price:1.32,quantiti:4},
				{nombre:'Mantiquella Sello de Oro',description:'asdasdsa',price:23.32,quantiti:5}
			],
			lista: []
			total: 0

		},
		methods:{
			deleteitem: function(index){
            	this.items.splice(index,1);
       		 },
			disabled: function(index){
				return this.items[index].quantiti === 1;
			},
			price: function(index){
				return (this.items[index].price * this.items[index].quantiti).toFixed(2);
			}
		},
		computed:{
			totalprice: function(){
				this.total = 0;
				for(item of this.items){
					this.total += item.quantiti * item.price
				}
				return this.total.toFixed(2);
			}
		},        
		created: function () {
			let usuario  = localStorage.getItem('usuario');
			let shopList = localStorage.getItem('shopList');
		
			const self = this;
			// `this` hace referencia a la instancia vm
			fetch('http://127.0.0.1:8000/api/getListarProducto')
			.then((response) => {
				return response.json();
			})
			.then((myJson) => {
				let lista = myJson || [];
				console.log("lista", lista)
				lista = lista.map(prod => {
					return new Item(prod);
				})
				this.lista = [...this.lista, ...lista];
				console.log('this.lista', this.lista);
			});
		}
	})

	</script>
  </body>
</html>